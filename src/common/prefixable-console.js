"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.console = global.console;
const LOG_PREFIXES = [];
const CONSOLE_PROTOTYPE = exports.console.constructor.prototype;
CONSOLE_PROTOTYPE.pushPrefix = LOG_PREFIXES.push.bind(LOG_PREFIXES);
CONSOLE_PROTOTYPE.popPrefix = LOG_PREFIXES.pop.bind(LOG_PREFIXES);
const LOGGER_TO_BIND = function (originalFunction, message, ...optionalParams) {
    const ARGV = Array.from(LOG_PREFIXES);
    if (message) {
        ARGV.push(message);
    }
    ARGV.push.apply(ARGV, optionalParams);
    originalFunction.apply(exports.console, ARGV);
};
global.console.warn = LOGGER_TO_BIND.bind(global.console, global.console.warn, '[WARNING]');
global.console.log = LOGGER_TO_BIND.bind(global.console, global.console.log);
// Decorator Factory
function PrefixLogWith(prefix) {
    return function (target, propertyKey, descriptor) {
        const ORIGINAL_FUNCTION = descriptor.value;
        descriptor.value = function (...argv) {
            let returnedValue;
            exports.console.pushPrefix(prefix);
            try {
                returnedValue = ORIGINAL_FUNCTION.apply(this, argv);
            }
            catch (e) {
                exports.console.popPrefix();
                throw e;
            }
            exports.console.popPrefix();
            return returnedValue;
        };
    };
}
exports.PrefixLogWith = PrefixLogWith;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlZml4YWJsZS1jb25zb2xlLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3ZvaWQvY29kZS9wb2x5X3RwL2xvZzI5OTAtMDEvc3JjL2NvbW1vbi9zcmMvIiwic291cmNlcyI6WyJwcmVmaXhhYmxlLWNvbnNvbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSxPQUFPLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUE0QixDQUFDO0FBR3RELE1BQU0sWUFBWSxHQUFhLEVBQUUsQ0FBQztBQUVsQyxNQUFNLGlCQUFpQixHQUFHLGVBQU8sQ0FBQyxXQUFXLENBQUMsU0FBOEIsQ0FBQztBQUM3RSxpQkFBaUIsQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEUsaUJBQWlCLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBSWxFLE1BQU0sY0FBYyxHQUFHLFVBQXlCLGdCQUF3QixFQUFFLE9BQWEsRUFBRSxHQUFHLGNBQXFCO0lBQzdHLE1BQU0sSUFBSSxHQUFVLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDN0MsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNWLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUNELElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsQ0FBQztJQUV0QyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsZUFBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFDLENBQUMsQ0FBQztBQUNGLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztBQUM1RixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUc3RSxvQkFBb0I7QUFDcEIsdUJBQThCLE1BQWM7SUFDeEMsTUFBTSxDQUFDLFVBQVUsTUFBVyxFQUFFLFdBQW1CLEVBQUUsVUFBOEI7UUFDN0UsTUFBTSxpQkFBaUIsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDO1FBQzNDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsVUFBVSxHQUFHLElBQVc7WUFDdkMsSUFBSSxhQUFrQixDQUFDO1lBQ3ZCLGVBQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDM0IsSUFBSSxDQUFDO2dCQUNELGFBQWEsR0FBRyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3hELENBQUM7WUFBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNULGVBQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFDcEIsTUFBTSxDQUFDLENBQUM7WUFDWixDQUFDO1lBQ0QsZUFBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3BCLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDekIsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQWhCRCxzQ0FnQkM7QUFBQSxDQUFDIn0=